var VueSimpleContextMenu=function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n,i=(function(e,t){e.exports=function(){var e="undefined"!=typeof window,t="undefined"!=typeof navigator,n=e&&("ontouchstart"in window||t&&navigator.msMaxTouchPoints>0)?["touchstart","click"]:["click"],i=function(e){return e},o={instances:[]};function r(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||i,events:e.events||n,isActive:!(!1===e.isActive)}}function s(e){var t=e.el,n=e.event,i=e.handler,o=e.middleware;n.target!==t&&!t.contains(n.target)&&o(n,t)&&i(n,t)}function d(e){var t=e.el,n=e.handler,i=e.middleware;return{el:t,eventHandlers:e.events.map(function(e){return{event:e,handler:function(e){return s({event:e,el:t,handler:n,middleware:i})}}})}}function a(e){var t=o.instances.findIndex(function(t){return t.el===e});-1!==t&&(o.instances[t].eventHandlers.forEach(function(e){return document.removeEventListener(e.event,e.handler)}),o.instances.splice(t,1))}return o.bind=function(e,t){var n=r(t.value);if(n.isActive){var i=d({el:e,events:n.events,handler:n.handler,middleware:n.middleware});i.eventHandlers.forEach(function(e){var t=e.event,n=e.handler;return setTimeout(function(){return document.addEventListener(t,n)},0)}),o.instances.push(i)}},o.update=function(e,t){var n=t.value,i=t.oldValue;if(JSON.stringify(n)!==JSON.stringify(i)){var u=r(n),l=u.events,c=u.handler,f=u.middleware;if(u.isActive){var v=o.instances.find(function(t){return t.el===e});v?(v.eventHandlers.forEach(function(e){return document.removeEventListener(e.event,e.handler)}),v.eventHandlers=l.map(function(t){return{event:t,handler:function(t){return s({event:t,el:e,handler:c,middleware:f})}}})):(v=d({el:e,events:l,handler:c,middleware:f}),o.instances.push(v)),v.eventHandlers.forEach(function(e){var t=e.event,n=e.handler;return setTimeout(function(){return document.addEventListener(t,n)},0)})}else a(e)}},o.unbind=a,{install:function(e){e.directive("click-outside",o)},directive:o}}()}(n={exports:{}},n.exports),n.exports);t.use(i);var o=function(e,t,n,i,o,r,s,d,a,u){"boolean"!=typeof s&&(a=d,d=s,s=!1);var l,c="function"==typeof n?n.options:n;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),i&&(c._scopeId=i),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):t&&(l=s?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,d(e))}),l)if(c.functional){var f=c.render;c.render=function(e,t){return l.call(t),f(e,t)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,l):[l]}return n},r={name:"VueSimpleContextMenu",props:{elementId:{type:String,required:!0},options:{type:Array,required:!0}},data:function(){return{item:null,menuWidth:null,menuHeight:null}},methods:{showMenu:function(e,t){this.item=t;var n=document.getElementById(this.elementId);if(n){var i=e.pageX,o=e.pageY;n.offsetParent&&(isNaN(parseInt(n.offsetParent.offsetLeft))||(i-=parseInt(n.offsetParent.offsetLeft)),isNaN(parseInt(n.offsetParent.offsetTop))||(o-=parseInt(n.offsetParent.offsetTop))),this.menuWidth&&this.menuHeight||(n.style.visibility="hidden",n.style.display="block",this.menuWidth=n.offsetWidth,this.menuHeight=n.offsetHeight,n.removeAttribute("style")),this.menuWidth+i>=window.innerWidth?n.style.left=i-this.menuWidth+2+"px":n.style.left=i-2+"px",this.menuHeight+o>=window.innerHeight?n.style.top=o-this.menuHeight+2+"px":n.style.top=o-2+"px",n.classList.add("vue-simple-context-menu--active")}},hideContextMenu:function(){var e=document.getElementById(this.elementId);e&&e.classList.remove("vue-simple-context-menu--active")},onClickOutside:function(){this.hideContextMenu()},optionClicked:function(e){this.hideContextMenu(),this.$emit("option-clicked",{item:this.item,option:e})},onEscKeyRelease:function(e){27===e.keyCode&&this.hideContextMenu()}},mounted:function(){document.body.addEventListener("keyup",this.onEscKeyRelease)},beforeDestroy:function(){document.removeEventListener("keyup",this.onEscKeyRelease)}},s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"vue-simple-context-menu",attrs:{id:e.elementId}},e._l(e.options,function(t,i){return n("li",{key:i,staticClass:"vue-simple-context-menu__item",class:[t.class,"divider"===t.type?"vue-simple-context-menu__divider":""],on:{click:function(n){return n.stopPropagation(),e.optionClicked(t)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),0)])};s._withStripped=!0;var d=o({render:s,staticRenderFns:[]},void 0,r,void 0,!1,void 0,void 0,void 0);function a(e){a.installed||(a.installed=!0,e.component("VueSimpleContextMenu",d))}var u={install:a},l=null;return"undefined"!=typeof window?l=window.Vue:"undefined"!=typeof global&&(l=global.Vue),l&&l.use(u),e.default=d,e.install=a,e}({},Vue);
